{"version":3,"sources":["webpack:///./pages/film-page.jsx","webpack:///./widgets/list.jsx","webpack:///./widgets/loading.jsx"],"names":["_react","__webpack_require__","_relaks","_list","FilmPage","meanwhile","this","props","route","swapi","show","_react2","default","createElement","FilmPageSync","fetchOne","params","id","film","fetchMultiple","characters","minimum","species","planets","vehicles","starships","AsyncComponent","displayName","_props2","className","title","opening_crawl","director","producer","release_date","List","urls","items","pageName","_loading2","PureComponent","field","map","url","index","item","pending","length","extractID","find","text","linkProps","href","undefined","key","defaultProps","Loading"],"mappings":"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","file":"film-page.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport { AsyncComponent } from 'relaks';\nimport { List } from 'widgets/list';\nimport Loading from 'widgets/loading';\n\nclass FilmPage extends AsyncComponent {\n    static displayName = 'FilmPage';\n\n    /**\n     * Retrieve remote data and render the synchronize half of this component\n     *\n     * @param  {Meanwhile}  meanwhile\n     *\n     * @return {VNode}\n     */\n    async renderAsync(meanwhile) {\n        let { route, swapi } = this.props;\n        let props = {\n            route,\n        };\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.film = await swapi.fetchOne(`/films/${route.params.id}/`);\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.characters = await swapi.fetchMultiple(props.film.characters, { minimum: 5 });\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.species = await swapi.fetchMultiple(props.film.species, { minimum: '60%' });\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.planets = await swapi.fetchMultiple(props.film.planets);\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.vehicles = await swapi.fetchMultiple(props.film.vehicles, { minimum: '60%' });\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.starships = await swapi.fetchMultiple(props.film.starships, { minimum: '60%' });\n        return <FilmPageSync {...props} />;\n    }\n}\n\nclass FilmPageSync extends PureComponent {\n    static displayName = 'FilmPageSync';\n\n    /**\n     * Render the component, making best effort using what props are given\n     *\n     * @return {VNode}\n     */\n    render() {\n        let { route, film, characters, species, planets, vehicles, starships } = this.props;\n        if (!film) {\n            return <Loading />;\n        }\n        return (\n            <div className=\"character-page\">\n                <h1>{film.title}</h1>\n                <p>{film.opening_crawl}</p>\n                <div>Director: {film.director}</div>\n                <div>Producer: {film.producer}</div>\n                <div>Release date: {film.release_date}</div>\n                <h2>Characters</h2>\n                <List urls={film.characters} items={characters} pageName=\"character-summary\" route={route} />\n                <h2>Species</h2>\n                <List urls={film.species} items={species} pageName=\"species-summary\" route={route} />\n                <h2>Planets</h2>\n                <List urls={film.planets} items={planets} pageName=\"planet-summary\" route={route} />\n                <h2>Vehicles</h2>\n                <List urls={film.vehicles} items={vehicles} pageName=\"vehicle-summary\" route={route} />\n                <h2>Starships</h2>\n                <List urls={film.starships} items={starships} pageName=\"starship-summary\" route={route} />\n            </div>\n        );\n    }\n}\n\nexport {\n    FilmPage as default,\n    FilmPage,\n    FilmPageSync,\n};\n","import React from 'react';\n\nfunction List(props) {\n    let { route, urls, items, field, pageName } = props;\n    if (urls) {\n        // accept single URL and object\n        if (typeof(urls) === 'string') {\n            urls = [ urls ];\n            items = [ items ];\n        }\n        // deal with holes in the data set\n        items = urls.map((url, index) => {\n            var item = (items) ? items[index] : null;\n            if (!item) {\n                item = { url, pending: true };\n            }\n            return item;\n        });\n    }\n    if (!items) {\n        return null;\n    }\n    if (items.length === 0) {\n        return <ul className=\"empty\"><li><span>none</span></li></ul>;\n    }\n    return (\n        <ul>\n        {\n            items.map((item) => {\n                let id = route.extractID(item.url);\n                let url = route.find(pageName, { id });\n                let text = item.pending ? '...' : item[field];\n                let linkProps = {\n                    href: url,\n                    className: (item.pending) ? 'pending' : undefined,\n                };\n                return <li key={id}><a {...linkProps}>{text}</a></li>;\n            })\n        }\n        </ul>\n    );\n}\n\nList.defaultProps = {\n    field: 'name'\n};\n\nList.displayName = 'List';\n\nexport {\n    List as default,\n    List\n};\n","import React from 'react';\n\nfunction Loading() {\n    return (\n        <div className=\"loading\">\n            <div>\n                <i className=\"fab fa-empire fa-spin\"/> Loading\n            </div>\n        </div>\n    );\n}\n\nLoading.displayName = 'Loading';\n\nexport {\n    Loading as default,\n    Loading\n};\n"],"sourceRoot":""}